defmodule MeatBar.ReportTest do
  use ExUnit.Case

  @data [["2015-01", "2015-01-01", 2],
         ["2015-01", "2015-01-02", 1],
         ["2015-01", "2015-01-03", 1],
         ["2015-01", "2015-01-06", 2],
         ["2015-01", "2015-01-07", 3],
         ["2015-01", "2015-01-08", 1],
         ["2015-01", "2015-01-09", 1],
         ["2015-01", "2015-01-10", 1],
         ["2015-01", "2015-01-11", 1],
         ["2015-01", "2015-01-12", 1],
         ["2015-01", "2015-01-13", 1],
         ["2015-01", "2015-01-15", 1],
         ["2015-01", "2015-01-17", 1],
         ["2015-02", "2015-02-01", 1],
         ["2015-03", "2015-03-01", 2],
         ["2015-04", "2015-04-01", 1],
         ["2015-05", "2015-05-01", 3],
         ["2015-08", "2015-08-01", 1]]

  test "report on streaks" do
    # streaks = MeatBar.Report.streaks(@data)
  end

  test "report on monthlypeaks" do
    expected = %{"2015-01" => "2015-01-07",
                 "2015-02" => "2015-02-01",
                 "2015-03" => "2015-03-01",
                 "2015-04" => "2015-04-01",
                 "2015-05" => "2015-05-01",
                 "2015-08" => "2015-08-01"}
    peaks = MeatBar.Report.monthly_peaks(@data)
    assert expected == peaks
  end
end
